<!--


‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïó‚ñë‚ñë‚ñë‚ñë‚ñë
‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ïö‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñë‚ñë
‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ïö‚ïù‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñë‚ñë
‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñë‚ñë
‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñë‚ñë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñë‚ñë‚ñë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
‚ïö‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù


ùî∏ùï¶ùï•ùïñùï¶ùï£ : Elias Zaiem
ùîªùïíùï•ùïñ : 18.05.2022
‚Ñôùï£ùï†ùïõùïñùï• : TPI Elias Zaiem Mai-2022
‚Ñôùï£ùï†ùïó ùîªùïñ ùïã‚ÑôùïÄ : Mr.Garchery
‚ÑÇùïùùïíùï§ùï§ùïñ : I.DA-P4A
-->
<div class="container" style="display: block; margin-top: 3vh; position:relative;">
	<?php
	if ($_SESSION['AlertMessage']['type'] != null) { ?>
		<div class="alert alert-<?= $_SESSION['AlertMessage']['type'] ?> alert-dismissible show" role="alert">
			<?= $_SESSION['AlertMessage']['message'] ?>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
	<?php
		$_SESSION['AlertMessage'] = [
			'type' => null,
			'message' => null
		];
	}
	?>
	<div class="panel panel-default" style="width: 100%;">
		<div class="panel-heading">
			<!-- Message de bienvenue-->
			<h2>Bienvenue sur Foto'Gal</h2>
		</div>
		<div class="panel-body">
			<h4>Affichage des 10 derni√®res productions par ordre chronologique.</h4>
		</div>
	</div>
</div>
<div class="container" style="margin-left: 250px;">
	<div class="row">
		<table class="table" style="background-color: #F0F0F0;">
			<thead>
				<tr>
					<!--Haut du tableau-->
					<th scope="col" style="padding-left: 60px; padding-right: 60px;">Titre</th>
					<th scope="col" style="padding-left: 50px; padding-right: 50px;">Description</th>
					<th scope="col" style="padding-left: 50px; padding-right: 50px;">Cat√©gorie</th>
					<th scope="col" style="padding-left: 70px; padding-right: 70px;">Image</th>
					<th scope="col" style="padding-left: 50px; padding-right: 50px;">Date de publication</th>
					<th scope="col" style="padding-left: 40px; padding-right: 40px;">Date de modification</th>
					<th scope="col" style="padding-left: 50px; padding-right: 50px;">Like&nbsp;/&nbsp;Dislike</th>
					<th scope="col" style="padding-left: 20px; padding-right: 20px;">D√©tails</th>
				</tr>
			</thead>
			<tbody>
				<?php
				//Affiche chaque production et affiche les donn√©es dans un tableau
				foreach (Production::getAllProductionAccueil() as $production) {
				?>
					<tr>
						<td style="padding-left: 30px;"><?= $production->getTitreProduction() ?></td>
						<td style="padding-left: 30px;"><?= $production->getDescriptionProduction() ?></td>
						<!--Si le nom de la cat√©gorie est null, alors on affiche Non d√©finie, sinon on affiche le nom de la cat√©gorie.-->
						<td style="padding-left: 58px;"><?= $production->getCategories_idCategorie() == null ? "Non d√©finie" :  Categorie::GetCategorieNameById($production->getCategories_idCategorie()) ?></td>
						<td style="max-width: 400px;"><img style="width:100%;" src="./assets/medias/<?= $production->getFilename() ?>"></td>
						<td><?= $production->getDate_soumission() ?></td>
						<td><?= $production->getDate_modification() ?></td>
						<?php
						//Si l'utilisateur est connect√©, alors on affiche rien, sinon on affiche le message suivant : "Connectez-vous pour pouvoir liker/disliker"
						if ($_SESSION['connectedUser']['isConnected'] == false) {
						?>
							<td>
								<a>Connectez-vous pour pouvoir liker/disliker.</a>
							</td>
						<?php
						} else {
						?>
							<td>
								<?php
								//Si l'utilisateur n'a pas liker/unliker alors on affiche les bouton, sinon on affiche juste si il a liker ou non.
								$likeUnlike = LikeUnlike::GetLikeUnlike($_SESSION['connectedUser']['idUser'], $production->getIdProduction());
								if ($likeUnlike == false) {							?>
									<a class="btn btn-success" href="index.php?uc=production&action=like&id= <?= $production->getIdProduction() ?>">Like</a>&nbsp;&nbsp;
									<a class="btn btn-danger" href="index.php?uc=production&action=dislike&id= <?= $production->getIdProduction() ?>">Dislike</a><br>
								<?php
								} else {
								?>
									<a>Vous avez <?= $likeUnlike == 1 ? "lik√©" : "dislik√©" ?> cette publication.</a><br>
								<?php
								}
								?>
								<br>
								<!-- Affichage du nombre de like/unlike de cette publication-->
								<?= "Like : " . LikeUnlike::GetCompteurLikeUnlike($production->getIdProduction(), 1) . "| Dislike : " . LikeUnlike::GetCompteurLikeUnlike($production->getIdProduction(), 2) ?>

							</td>
						<?php
						}
						?>
						<!--Bouton pour acc√©der √† la page d√©tails de la production-->
						<td style="padding-left: 20px;"><a class="btn btn-info" href="index.php?uc=production&action=showDetail&id=<?= $production->getIdProduction() ?>">Voir</a></td>
					</tr>
				<?php } ?>
			</tbody>
		</table>
	</div>
</div>